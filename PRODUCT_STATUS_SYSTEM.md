# –°–∏—Å—Ç–µ–º–∞ —Å—Ç–∞—Ç—É—Å–æ–≤ –ø—Ä–æ–¥—É–∫—Ç–æ–≤

## –û–±–∑–æ—Ä

–°–∏—Å—Ç–µ–º–∞ —Å—Ç–∞—Ç—É—Å–æ–≤ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª—è –ø—Ä–æ—Ü–µ—Å—Å–∞ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Ç–æ–≤–∞—Ä–æ–≤. –í—Å–µ –ø—Ä–æ–¥—É–∫—Ç—ã —Å–æ–∑–¥–∞—é—Ç—Å—è —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º `processing` –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∫–ª–∞—Å—Å–∏—Ñ–∏—Ü–∏—Ä—É—é—Ç—Å—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–º –≤–æ—Ä–∫–µ—Ä–æ–º –Ω–∞ –æ—Å–Ω–æ–≤–µ –∞–Ω–∞–ª–∏–∑–∞ –Ω–∞–∑–≤–∞–Ω–∏—è, –±—Ä–µ–Ω–¥–∞ –∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏.

## –°—Ç–∞—Ç—É—Å—ã –ø—Ä–æ–¥—É–∫—Ç–æ–≤

### `processing` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
- **–û–ø–∏—Å–∞–Ω–∏–µ**: –í—Å–µ –ø—Ä–æ–¥—É–∫—Ç—ã —Å–æ–∑–¥–∞—é—Ç—Å—è —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º `processing`
- **–ò–∑–º–µ–Ω–µ–Ω–∏–µ**: –°—Ç–∞—Ç—É—Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–∑–º–µ–Ω—è–µ—Ç—Å—è –≤–æ—Ä–∫–µ—Ä–æ–º –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**: –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –≤–æ—Ä–∫–µ—Ä –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –ø—Ä–æ–¥—É–∫—Ç –∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç `category_id` –∏ `brand_id`

## –§–∏–ª—å—Ç—Ä—ã –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –ø—Ä–æ–¥—É–∫—Ç–æ–≤

### `my` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ –ø—Ä–æ–¥—É–∫—Ç—ã —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- **SQL**: `WHERE user_id = ?`

### `others`
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–æ–¥—É–∫—Ç—ã –¥—Ä—É–≥–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- **SQL**: `WHERE user_id != ?`

### `processing`
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤—Å–µ –ø—Ä–æ–¥—É–∫—Ç—ã —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º `processing` (–æ–∂–∏–¥–∞—é—â–∏–µ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏)
- **SQL**: `WHERE status = 'processing'`

### `not_classified`
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–æ–¥—É–∫—Ç—ã —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º `not_classified` (–Ω–µ —É–¥–∞–ª–æ—Å—å –∫–ª–∞—Å—Å–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å)
- **SQL**: `WHERE status = 'not_classified'`

### `classified`
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–æ–¥—É–∫—Ç—ã —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º `classified` (—É—Å–ø–µ—à–Ω–æ –∫–ª–∞—Å—Å–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω—ã)
- **SQL**: `WHERE status = 'classified'`

## –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –¥–ª—è –æ—Ñ—Ñ–µ—Ä–æ–≤

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –æ—Ñ—Ñ–µ—Ä–∞
- –û—Ñ—Ñ–µ—Ä—ã –º–æ–≥—É—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è –ø—Ä–æ–¥—É–∫—Ç–æ–≤ —Å –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã–º–∏ `category_id` –∏ `brand_id`
- **–û—à–∏–±–∫–∞**: "–ù–µ–ª—å–∑—è —Å–æ–∑–¥–∞—Ç—å –æ—Ñ—Ñ–µ—Ä –¥–ª—è –ø—Ä–æ–¥—É–∫—Ç–∞ –±–µ–∑ category_id –∏–ª–∏ brand_id. –ü—Ä–æ–¥—É–∫—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∫–ª–∞—Å—Å–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω"

### –õ–æ–≥–∏–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏
```sql
SELECT category_id, brand_id FROM products WHERE id = ?
```

## API Endpoints

### GET /api/v1/products
**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `owner` - —Ñ–∏–ª—å—Ç—Ä (my, others, pending, not_classified, classified)
- `page` - –Ω–æ–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- `limit` - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ

**–ü—Ä–∏–º–µ—Ä—ã:**
```bash
# –ú–æ–∏ –ø—Ä–æ–¥—É–∫—Ç—ã
curl "http://localhost:8095/api/v1/products?owner=my&api_key=YOUR_API_KEY"

# –ü—Ä–æ–¥—É–∫—Ç—ã –≤ –æ–±—Ä–∞–±–æ—Ç–∫–µ
curl "http://localhost:8095/api/v1/products?owner=processing&api_key=YOUR_API_KEY"

# –ü—Ä–æ–¥—É–∫—Ç—ã, —Ç—Ä–µ–±—É—é—â–∏–µ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏
curl "http://localhost:8095/api/v1/products?owner=not_classified&api_key=YOUR_API_KEY"

# –ö–ª–∞—Å—Å–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã
curl "http://localhost:8095/api/v1/products?owner=classified&api_key=YOUR_API_KEY"
```

### POST /api/v1/products
**–°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞:**
- –°—Ç–∞—Ç—É—Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –≤ `processing`
- `category_id` –∏ `brand_id` –∏–∑–Ω–∞—á–∞–ª—å–Ω–æ `NULL`
- –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è

### PUT /api/v1/products/:id
**–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞:**
- –ü–æ–ª–µ `status` –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —á–µ—Ä–µ–∑ API
- –ú–æ–∂–Ω–æ –∏–∑–º–µ–Ω—è—Ç—å —Ç–æ–ª—å–∫–æ: name, vendor_article, recommend_price, brand, category, brand_id, category_id, description, barcode

## –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø—Ä–æ—Ü–µ—Å—Å:
1. **–ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ø—Ä–æ–¥—É–∫—Ç–∞** –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è
2. **–í–æ—Ä–∫–µ—Ä –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏** –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –Ω–∞–∑–≤–∞–Ω–∏–µ, –±—Ä–µ–Ω–¥ –∏ –∫–∞—Ç–µ–≥–æ—Ä–∏—é
3. **–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –¥–ª—è `classified`:**
   - `confidence.category >= 0.99` ‚Üí –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è `category_id`
   - `confidence.brand >= 0.99` ‚Üí –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è `brand_id`
   - **–ú–∏–Ω–∏–º—É–º –æ–¥–∏–Ω ID** –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–∞–π–¥–µ–Ω —Å –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å—é ‚â• 0.99

### –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏:

**‚úÖ –£—Å–ø–µ—à–Ω–∞—è –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è:**
- **–°—Ç–∞—Ç—É—Å:** `classified`
- **–ü–æ–ª—è:** `category_id` –∏/–∏–ª–∏ `brand_id` –∑–∞–ø–æ–ª–Ω–µ–Ω—ã
- **–£—Å–ª–æ–≤–∏–µ:** –ù–∞–π–¥–µ–Ω —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω ID —Å –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å—é ‚â• 0.99

**‚ùå –ù–µ—É–¥–∞—á–Ω–∞—è –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è:**
- **–°—Ç–∞—Ç—É—Å:** `not_classified`
- **–ü–æ–ª—è:** `category_id = NULL`, `brand_id = NULL`
- **–£—Å–ª–æ–≤–∏–µ:** –ù–µ –Ω–∞–π–¥–µ–Ω—ã ID —Å –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ–π –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å—é

### –ü—Ä–∏–º–µ—Ä SQL –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞:
```sql
-- –ù–∞–π—Ç–∏ –ø—Ä–æ–¥—É–∫—Ç—ã –¥–ª—è –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏
SELECT id, name, brand, category FROM products 
WHERE status = 'processing';

-- –ù–∞–π—Ç–∏ –∫–ª–∞—Å—Å–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã
SELECT id, name, category_id, brand_id FROM products 
WHERE status = 'classified';

-- –ù–∞–π—Ç–∏ –Ω–µ–∫–ª–∞—Å—Å–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã
SELECT id, name FROM products 
WHERE status = 'not_classified';
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### –¢–∞–±–ª–∏—Ü–∞ `products`
```sql
CREATE TABLE products (
    id INT AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(255) NOT NULL,
    vendor_article VARCHAR(255) NOT NULL,
    recommend_price DECIMAL(10,2),
    brand VARCHAR(255),
    category VARCHAR(255),
    brand_id INT NULL,
    category_id INT NULL,
    description TEXT,
    barcode VARCHAR(50) NULL,
    status ENUM('processing', 'classified', 'not_classified') DEFAULT 'processing',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    user_id INT
);
```

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
```bash
./test_product_status.sh
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–æ–≤
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –ø—Ä–æ–¥—É–∫—Ç–∞
curl "http://localhost:8095/api/v1/products/1?api_key=YOUR_API_KEY" | jq '.status'

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –≤ –æ–±—Ä–∞–±–æ—Ç–∫–µ
curl "http://localhost:8095/api/v1/products?owner=processing&api_key=YOUR_API_KEY" | jq '.total'

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–µ–∫–ª–∞—Å—Å–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤
curl "http://localhost:8095/api/v1/products?owner=not_classified&api_key=YOUR_API_KEY" | jq '.total'

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–ª–∞—Å—Å–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤
curl "http://localhost:8095/api/v1/products?owner=classified&api_key=YOUR_API_KEY" | jq '.total'
```

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –°—Ç–∞—Ç—É—Å –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –∏–∑–º–µ–Ω–µ–Ω —á–µ—Ä–µ–∑ API
- –¢–æ–ª—å–∫–æ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –≤–æ—Ä–∫–µ—Ä –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ –º–æ–∂–µ—Ç –æ–±–Ω–æ–≤–ª—è—Ç—å `category_id` –∏ `brand_id`
- –û—Ñ—Ñ–µ—Ä—ã —Å–æ–∑–¥–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è –∫–ª–∞—Å—Å–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤
- –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –≤ `app.log`

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏

### –õ–æ–≥–∏ –≤–æ—Ä–∫–µ—Ä–∞ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏:
```
üöÄ –í–æ—Ä–∫–µ—Ä –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∑–∞–ø—É—â–µ–Ω
‚úÖ –ó–∞–¥–∞—á–∞ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ –æ—á–µ—Ä–µ–¥—å –¥–ª—è –ø—Ä–æ–¥—É–∫—Ç–∞ 123
üîç –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—é –ø—Ä–æ–¥—É–∫—Ç–∞ 123: –¢–µ–ª–µ–≤–∏–∑–æ—Ä Samsung
üìä –†–µ–∑—É–ª—å—Ç–∞—Ç –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø—Ä–æ–¥—É–∫—Ç–∞ 123: –∫–∞—Ç–µ–≥–æ—Ä–∏—è=15 (—Ç–æ—á–Ω–æ—Å—Ç—å=0.99), –±—Ä–µ–Ω–¥=42 (—Ç–æ—á–Ω–æ—Å—Ç—å=0.98)
üéØ –ü—Ä–æ–¥—É–∫—Ç 123 —É—Å–ø–µ—à–Ω–æ –∫–ª–∞—Å—Å–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω
‚úÖ –ü—Ä–æ–¥—É–∫—Ç 123 –æ–±–Ω–æ–≤–ª–µ–Ω: category_id=15, brand_id=42, status=classified
```

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Å—Ç–∞—Ç—É—Å–∞–º:
```sql
-- –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
SELECT status, COUNT(*) as count FROM products GROUP BY status;

-- –ü—Ä–æ–¥—É–∫—Ç—ã –≤ –æ–±—Ä–∞–±–æ—Ç–∫–µ
SELECT COUNT(*) FROM products WHERE status = 'processing';

-- –£—Å–ø–µ—à–Ω–æ –∫–ª–∞—Å—Å–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ
SELECT COUNT(*) FROM products WHERE status = 'classified';

-- –ù–µ–∫–ª–∞—Å—Å–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ
SELECT COUNT(*) FROM products WHERE status = 'not_classified';
``` 