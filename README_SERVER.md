# PortalData API Server - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
```bash
cd /var/www/go
./manage_server.sh start
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
```bash
./manage_server.sh status
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
```bash
./manage_server.sh logs
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API
```bash
./manage_server.sh test
```

## üìã –î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

| –ö–æ–º–∞–Ω–¥–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------|
| `start` | –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä |
| `stop` | –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–µ—Ä–≤–µ—Ä |
| `restart` | –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä |
| `status` | –ü–æ–∫–∞–∑–∞—Ç—å —Å—Ç–∞—Ç—É—Å |
| `logs` | –ü–æ–∫–∞–∑–∞—Ç—å –ª–æ–≥–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ |
| `test` | –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å API |
| `build` | –°–æ–±—Ä–∞—Ç—å —Å–µ—Ä–≤–µ—Ä |

## üîß –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±—ã –∑–∞–ø—É—Å–∫–∞

### 1. –ü—Ä–æ—Å—Ç–æ–π –∑–∞–ø—É—Å–∫ –≤ —Ñ–æ–Ω–µ
```bash
./run_server.sh
```

### 2. Systemd —Å–µ—Ä–≤–∏—Å (–∞–≤—Ç–æ–∑–∞–ø—É—Å–∫)
```bash
# –í–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫
sudo systemctl enable portaldata-api.service

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å
sudo systemctl start portaldata-api.service

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
sudo systemctl status portaldata-api.service

# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–µ—Ä–≤–∏—Å
sudo systemctl stop portaldata-api.service
```

### 3. –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫
```bash
# –ó–∞–ø—É—Å–∫ –≤ —Ñ–æ–Ω–µ
nohup ./app_8095 > server.log 2>&1 &

# –ó–∞–ø—É—Å–∫ —Å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º
./app_8095 > server.log 2>&1 &

# –ó–∞–ø—É—Å–∫ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ (–¥–ª—è –æ—Ç–ª–∞–¥–∫–∏)
./app_8095
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
```bash
ps aux | grep app_8095
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Ä—Ç–æ–≤
```bash
netstat -tlnp | grep 8095
lsof -i :8095
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
```bash
# –ü–æ—Å–ª–µ–¥–Ω–∏–µ —Å—Ç—Ä–æ–∫–∏
tail -20 server.log

# –õ–æ–≥–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
tail -f server.log

# –ü–æ–∏—Å–∫ –æ—à–∏–±–æ–∫
grep -i error server.log
```

## üõ†Ô∏è –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –°–µ—Ä–≤–µ—Ä –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø–æ—Ä—Ç 8095 —Å–≤–æ–±–æ–¥–µ–Ω:
   ```bash
   lsof -i :8095
   ```

2. –£–±–µ–π—Ç–µ –ø—Ä–æ—Ü–µ—Å—Å—ã, –∑–∞–Ω–∏–º–∞—é—â–∏–µ –ø–æ—Ä—Ç:
   ```bash
   pkill -f app_8095
   ```

3. –ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä:
   ```bash
   ./manage_server.sh build
   ```

### –°–µ—Ä–≤–µ—Ä –∑–∞–≤–∏—Å–∞–µ—Ç
1. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –≤—Å–µ –ø—Ä–æ—Ü–µ—Å—Å—ã:
   ```bash
   pkill -f app_8095
   ```

2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å –ø–æ–º–æ—â—å—é —Å–∫—Ä–∏–ø—Ç–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
   ```bash
   ./manage_server.sh start
   ```

### –ü—Ä–æ–±–ª–µ–º—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ MySQL:
   ```bash
   mysql -u root -p123456 -e "SELECT 1;"
   ```

2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ –∫–æ–¥–µ

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
/var/www/go/
‚îú‚îÄ‚îÄ app_8095                    # –ò—Å–ø–æ–ª–Ω—è–µ–º—ã–π —Ñ–∞–π–ª —Å–µ—Ä–≤–µ—Ä–∞
‚îú‚îÄ‚îÄ manage_server.sh            # –û—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
‚îú‚îÄ‚îÄ run_server.sh               # –ü—Ä–æ—Å—Ç–æ–π —Å–∫—Ä–∏–ø—Ç –∑–∞–ø—É—Å–∫–∞
‚îú‚îÄ‚îÄ app_8095_improved          # –£–ª—É—á—à–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è –∑–∞–ø—É—Å–∫–∞
‚îú‚îÄ‚îÄ server.log                  # –õ–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞
‚îú‚îÄ‚îÄ server.pid                  # PID —Ñ–∞–π–ª (—Å–æ–∑–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
‚îú‚îÄ‚îÄ portaldata-api.service      # Systemd —Å–µ—Ä–≤–∏—Å
‚îî‚îÄ‚îÄ README_SERVER.md           # –≠—Ç–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

## üîê API –ö–ª—é—á–∏

–î–ª—è —Ä–∞–±–æ—Ç—ã —Å API —Ç—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è:
- **API Key**: `026b26ac7a206c51a216b3280042cda5178710912da68ae696a713970034dd5f`
- **Header**: `Authorization: Bearer <token>` –∏–ª–∏ `X-API-KEY: <token>`

## üåê –î–æ—Å—Ç—É–ø–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

- **API Base URL**: `http://localhost:8095/api/v1`
- **Swagger UI**: `http://localhost:8095/swagger/index.html`
- **Products**: `/api/v1/products`
- **Offers**: `/api/v1/offers`
- **Orders**: `/api/v1/orders`
- **Warehouses**: `/api/v1/warehouses`

## üìù –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API —Å curl
```bash
# –ü–æ–ª—É—á–∏—Ç—å –ø—Ä–æ–¥—É–∫—Ç—ã (—Ç—Ä–µ–±—É–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é)
curl -H "Authorization: Bearer 026b26ac7a206c51a216b3280042cda5178710912da68ae696a713970034dd5f" \
     http://localhost:8095/api/v1/products

# –°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–¥—É–∫—Ç
curl -X POST \
     -H "Authorization: Bearer 026b26ac7a206c51a216b3280042cda5178710912da68ae696a713970034dd5f" \
     -H "Content-Type: application/json" \
     -d '{"name":"Test Product","article":"TEST001","brand":"TestBrand"}' \
     http://localhost:8095/api/v1/products
```

## ‚ö° –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫

–°–µ—Ä–≤–µ—Ä –Ω–∞—Å—Ç—Ä–æ–µ–Ω –Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ –ø—Ä–∏ —Å–±–æ—è—Ö:
- **Systemd**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥
- **–°–∫—Ä–∏–ø—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è**: –†—É—á–Ω–æ–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ `restart`
- **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**: –í—Å–µ –æ—à–∏–±–∫–∏ –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –≤ `server.log` 