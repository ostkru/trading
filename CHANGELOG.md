# История изменений

## [2025-08-06] - Система статусов продуктов

### Добавлено
- **Система статусов продуктов** - все продукты имеют статус `pending` по умолчанию
- **Защита от изменения статуса** - поле `status` недоступно для изменения через API
- **Новые фильтры продуктов:**
  - `not_classified` - продукты без `category_id` или `brand_id`
  - `classified` - продукты с заполненными `category_id` и `brand_id`
- **Ограничения для офферов** - только классифицированные продукты могут быть добавлены в офферы
- **Обновленная OpenAPI документация** - добавлено описание системы статусов

### Изменено
- **Порт приложения** - изменен с 8095 на 8090
- **Конфигурация** - обновлен порт по умолчанию в `config.go`
- **OpenAPI спецификация** - добавлено поле `status` в схему Product
- **Тестовые скрипты** - обновлены для работы с новым портом

### Технические детали
- Статус продуктов не может быть изменен через API
- Классификация происходит внешним скриптом по полям `category_id` и `brand_id`
- Офферы создаются только для продуктов с заполненными `category_id` и `brand_id`
- Все продукты в базе данных имеют статус `pending`

### Файлы изменений
- `internal/modules/products/model.go` - добавлено поле Status
- `internal/modules/products/service.go` - обновлена логика фильтрации
- `internal/modules/offer/service.go` - добавлена проверка классификации
- `internal/modules/products/handler.go` - обновлены валидаторы
- `internal/pkg/config/config.go` - изменен порт по умолчанию
- `openapi.json` - обновлена документация
- `test_product_status.sh` - обновлен для нового порта
- `PRODUCT_STATUS_SYSTEM.md` - создана документация системы
- `fix_product_status.sql` - SQL для исправления статусов

### Тестирование
- ✅ Все продукты имеют статус `pending`
- ✅ Фильтры работают корректно
- ✅ Создание офферов ограничено классифицированными продуктами
- ✅ API работает на порту 8090 