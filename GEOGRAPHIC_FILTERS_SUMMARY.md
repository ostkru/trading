# üéâ –ò—Ç–æ–≥–æ–≤—ã–π –æ—Ç—á–µ—Ç: –ì–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–µ —Ñ–∏–ª—å—Ç—Ä—ã –¥–ª—è Offers

## ‚úÖ –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### 1. **–ù–æ–≤—ã–µ –º–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö**
- `GeographicFilter` - —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–ª—è –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω—ã—Ö –æ–±–ª–∞—Å—Ç–µ–π
- `OfferFilterRequest` - –∫–æ–º–ø–ª–µ–∫—Å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∏–ª—å—Ç—Ä–æ–≤
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ —Ñ–∏–ª—å—Ç—Ä–æ–≤ –≤ –æ–¥–Ω–æ–º –∑–∞–ø—Ä–æ—Å–µ

### 2. **–ù–æ–≤—ã–µ –º–µ—Ç–æ–¥—ã —Å–µ—Ä–≤–∏—Å–∞**
- `ListOffersWithFilters()` - —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–Ω—ã–µ offers —Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π
- `PublicListOffersWithFilters()` - —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—É–±–ª–∏—á–Ω—ã–µ offers
- –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ –º–µ—Ç–æ–¥–∞–º–∏

### 3. **–ù–æ–≤—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏**
- `ListOffersWithFilters()` - POST /api/v1/offers/filter
- `PublicListOffersWithFilters()` - POST /api/v1/offers/public/filter
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

### 4. **–ù–æ–≤—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã**
```go
// –ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã
POST /api/v1/offers/filter

// –ü—É–±–ª–∏—á–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã  
POST /api/v1/offers/public/filter
```

## üó∫Ô∏è –¢–∏–ø—ã —Ñ–∏–ª—å—Ç—Ä–æ–≤

### –ì–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–µ —Ñ–∏–ª—å—Ç—Ä—ã
```json
{
  "geographic": {
    "min_latitude": 55.0,
    "max_latitude": 56.0,
    "min_longitude": 37.0,
    "max_longitude": 38.0
  }
}
```

### –§–∏–ª—å—Ç—Ä—ã –ø–æ —Ü–µ–Ω–µ
```json
{
  "price_min": 100,
  "price_max": 5000
}
```

### –§–∏–ª—å—Ç—Ä—ã –ø–æ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏
```json
{
  "available_lots": 1
}
```

### –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã
```json
{
  "filter": "all",
  "offer_type": "sale",
  "geographic": {...},
  "price_min": 500,
  "available_lots": 1
}
```

## üß™ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### ‚úÖ –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã
- **–ì–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–π —Ñ–∏–ª—å—Ç—Ä (–ú–æ—Å–∫–≤–∞)**: ‚úÖ 20 –æ—Ñ—Ñ–µ—Ä–æ–≤ –Ω–∞–π–¥–µ–Ω–æ
- **–§–∏–ª—å—Ç—Ä –ø–æ —Ü–µ–Ω–µ (100-5000)**: ‚úÖ 20 –æ—Ñ—Ñ–µ—Ä–æ–≤ –Ω–∞–π–¥–µ–Ω–æ  
- **–ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ñ–∏–ª—å—Ç—Ä**: ‚úÖ 1 –æ—Ñ—Ñ–µ—Ä –Ω–∞–π–¥–µ–Ω
- **–ü—É–±–ª–∏—á–Ω—ã–µ –æ—Ñ—Ñ–µ—Ä—ã —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏**: ‚úÖ 20 –æ—Ñ—Ñ–µ—Ä–æ–≤ –Ω–∞–π–¥–µ–Ω–æ
- **–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã**: ‚úÖ –û—à–∏–±–∫–∏ 400 –≤–æ–∑–≤—Ä–∞—â–µ–Ω—ã

### üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- **–í—Å–µ–≥–æ —Ç–µ—Å—Ç–æ–≤**: 5
- **–ü—Ä–æ–π–¥–µ–Ω–æ**: 5 (100%)
- **–ü—Ä–æ–≤–∞–ª–µ–Ω–æ**: 0

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

### SQL –∑–∞–ø—Ä–æ—Å—ã
```sql
-- –ì–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–π —Ñ–∏–ª—å—Ç—Ä
WHERE latitude >= ? AND latitude <= ? 
  AND longitude >= ? AND longitude <= ?

-- –§–∏–ª—å—Ç—Ä –ø–æ —Ü–µ–Ω–µ  
WHERE price_per_unit >= ? AND price_per_unit <= ?

-- –§–∏–ª—å—Ç—Ä –ø–æ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏
WHERE available_lots >= ?
```

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- ‚úÖ Prepared statements –¥–ª—è –≤—Å–µ—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –≠–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ SQL –∏–Ω—ä–µ–∫—Ü–∏–π
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- ‚úÖ –ò–Ω–¥–µ–∫—Å—ã –ø–æ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º –∏ —Ü–µ–Ω–∞–º
- ‚úÖ –ü–∞–≥–∏–Ω–∞—Ü–∏—è (–º–∞–∫—Å–∏–º—É–º 100 –∑–∞–ø–∏—Å–µ–π)
- ‚úÖ –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ JOIN –∑–∞–ø—Ä–æ—Å—ã

## üìà –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### 1. –ü–æ–∏—Å–∫ –≤ –ú–æ—Å–∫–≤–µ
```bash
curl -X POST /api/v1/offers/filter \
  -d '{
    "geographic": {
      "min_latitude": 55.0, "max_latitude": 56.0,
      "min_longitude": 37.0, "max_longitude": 38.0
    }
  }'
```

### 2. –ü–æ–∏—Å–∫ –ø–æ —Ü–µ–Ω–µ
```bash
curl -X POST /api/v1/offers/filter \
  -d '{
    "price_min": 1000,
    "price_max": 3000
  }'
```

### 3. –ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–π –ø–æ–∏—Å–∫
```bash
curl -X POST /api/v1/offers/filter \
  -d '{
    "filter": "all",
    "offer_type": "sale", 
    "geographic": {
      "min_latitude": 0, "max_latitude": 90,
      "min_longitude": 0, "max_longitude": 180
    },
    "price_min": 1000,
    "price_max": 3000
  }'
```

## üöÄ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

### 1. **–ì–∏–±–∫–æ—Å—Ç—å**
- –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ª—é–±—ã—Ö —Ñ–∏–ª—å—Ç—Ä–æ–≤
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω—ã—Ö –æ–±–ª–∞—Å—Ç–µ–π
- –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

### 2. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**
- –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ SQL –∑–∞–ø—Ä–æ—Å—ã
- –ò–Ω–¥–µ–∫—Å—ã –ø–æ –∫–ª—é—á–µ–≤—ã–º –ø–æ–ª—è–º
- –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞—è –ø–∞–≥–∏–Ω–∞—Ü–∏—è

### 3. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Å–µ—Ö –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –ó–∞—â–∏—Ç–∞ –æ—Ç SQL –∏–Ω—ä–µ–∫—Ü–∏–π
- –ö–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø–∞

### 4. **–£–¥–æ–±—Å—Ç–≤–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è**
- JSON API
- –ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- –ü—Ä–∏–º–µ—Ä—ã –¥–ª—è –≤—Å–µ—Ö —Å–ª—É—á–∞–µ–≤

## üìã –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: `GEOGRAPHIC_FILTERS_API.md`
- **–¢–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç**: `test_geographic_filters.php`
- **–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è**: –í–∫–ª—é—á–µ–Ω—ã –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é

## üéØ –ì–æ—Ç–æ–≤–æ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É

‚úÖ **–í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã**  
‚úÖ **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∞**  
‚úÖ **–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å –æ–±–µ—Å–ø–µ—á–µ–Ω–∞**  
‚úÖ **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –ø—Ä–æ–≤–µ—Ä–µ–Ω–∞**  
‚úÖ **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–∞**

---

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è –≥–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏—Ö —Ñ–∏–ª—å—Ç—Ä–æ–≤ –¥–ª—è offers –∑–∞–≤–µ—Ä—à–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ!** üéâ 