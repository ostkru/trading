# üìã –°–≤–æ–¥–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π: WB –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –≤ Go API

## üéØ **–ß—Ç–æ –±—ã–ª–æ –æ–±–Ω–æ–≤–ª–µ–Ω–æ**

### **1. –ê–ª–≥–æ—Ä–∏—Ç–º –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ category_id:**
- ‚úÖ **–°–µ–ª–µ–∫—Ç–∏–≤–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è** - —Ç–æ–ª—å–∫–æ –¥–ª—è WB –∫–∞—Ç–µ–≥–æ—Ä–∏–π —Å –ø—Ä–µ—Ñ–∏–∫—Å–æ–º "wb:"
- ‚úÖ **–§–æ—Ä–º–∞—Ç WB –∫–∞—Ç–µ–≥–æ—Ä–∏–π:** `"wb: 1318 - —Å–≤–∞—Ä–æ—á–Ω—ã–µ –∞–ø–ø–∞—Ä–∞—Ç—ã"`
- ‚úÖ **–ü–∞—Ä—Å–∏–Ω–≥:** –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ `subjectId` –∏ `entity` –∏–∑ WB –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
- ‚úÖ **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–µ—Ñ–∏–∫—Å–∞:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ "wb:" –ø–µ—Ä–µ–¥ –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π

### **2. –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:**

#### **`internal/utils/category_id.go`:**
- ‚úÖ `GenerateCategoryID()` - —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –¥–ª—è WB –∫–∞—Ç–µ–≥–æ—Ä–∏–π
- ‚úÖ `isWBCategory()` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–µ—Ñ–∏–∫—Å–∞ "wb:"
- ‚úÖ `parseWBCategory()` - –ø–∞—Ä—Å–∏–Ω–≥ —Ñ–æ—Ä–º–∞—Ç–∞ "wb: 1318 - —Å–≤–∞—Ä–æ—á–Ω—ã–µ –∞–ø–ø–∞—Ä–∞—Ç—ã"
- ‚úÖ `IsWBCategory()` - –ø—É–±–ª–∏—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ WB –∫–∞—Ç–µ–≥–æ—Ä–∏–π
- ‚úÖ `ParseWBCategory()` - –ø—É–±–ª–∏—á–Ω—ã–π –ø–∞—Ä—Å–∏–Ω–≥ WB –∫–∞—Ç–µ–≥–æ—Ä–∏–π

#### **`internal/modules/products/model.go`:**
- ‚úÖ `CreateProductRequest.GenerateCategoryID()` - —Ç–æ–ª—å–∫–æ –¥–ª—è WB –∫–∞—Ç–µ–≥–æ—Ä–∏–π
- ‚úÖ `UpdateProductRequest.GenerateCategoryID()` - —Ç–æ–ª—å–∫–æ –¥–ª—è WB –∫–∞—Ç–µ–≥–æ—Ä–∏–π
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ `categoryID > 0` –ø–µ—Ä–µ–¥ —É—Å—Ç–∞–Ω–æ–≤–∫–æ–π

#### **`internal/modules/products/service.go`:**
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ `CreateProduct()`, `UpdateProduct()`, `CreateProducts()`
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–∑–æ–≤ `GenerateCategoryID()` –¥–ª—è WB –∫–∞—Ç–µ–≥–æ—Ä–∏–π

### **3. –û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:**
- ‚úÖ `CATEGORY_ID_INTEGRATION.md` - –æ–±–Ω–æ–≤–ª–µ–Ω–∞ –¥–ª—è WB –∫–∞—Ç–µ–≥–æ—Ä–∏–π
- ‚úÖ `WB_CATEGORY_ID_IMPLEMENTATION.md` - –Ω–æ–≤–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- ‚úÖ `examples/category_id_usage.go` - –ø—Ä–∏–º–µ—Ä—ã –¥–ª—è WB –∫–∞—Ç–µ–≥–æ—Ä–∏–π

## üöÄ **–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç**

### **WB –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (–≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç ID):**
```json
POST /products
{
    "category": "wb: 1318 - —Å–≤–∞—Ä–æ—á–Ω—ã–µ –∞–ø–ø–∞—Ä–∞—Ç—ã"
    // category_id –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è: 1496952285
}
```

### **–ù–ï-WB –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (–ù–ï –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç ID):**
```json
POST /products
{
    "category": "1318 - —Å–≤–∞—Ä–æ—á–Ω—ã–µ –∞–ø–ø–∞—Ä–∞—Ç—ã"
    // category_id –ù–ï –±—É–¥–µ—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω (–æ—Å—Ç–∞–Ω–µ—Ç—Å—è null)
}
```

### **–Ø–≤–Ω–æ —É–∫–∞–∑–∞–Ω–Ω—ã–π ID (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç):**
```json
POST /products
{
    "category": "wb: 1318 - —Å–≤–∞—Ä–æ—á–Ω—ã–µ –∞–ø–ø–∞—Ä–∞—Ç—ã",
    "category_id": 1234567890
    // –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —É–∫–∞–∑–∞–Ω–Ω—ã–π ID
}
```

## üìä **–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è**

### **WB –∫–∞—Ç–µ–≥–æ—Ä–∏–∏:**
- ‚úÖ `"wb: 1318 - —Å–≤–∞—Ä–æ—á–Ω—ã–µ –∞–ø–ø–∞—Ä–∞—Ç—ã"` ‚Üí `1496952285`
- ‚úÖ `"wb: 2384 - —Å–≤–µ—Ä–ª–∞"` ‚Üí `2457353255`
- ‚úÖ `"wb: 2197 - —à—É—Ä—É–ø–æ–≤–µ—Ä—Ç—ã"` ‚Üí `1319357246`

### **–ù–ï-WB –∫–∞—Ç–µ–≥–æ—Ä–∏–∏:**
- ‚úÖ `"1318 - —Å–≤–∞—Ä–æ—á–Ω—ã–µ –∞–ø–ø–∞—Ä–∞—Ç—ã"` ‚Üí `0` (–Ω–µ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è)
- ‚úÖ `"–°–≤–∞—Ä–æ—á–Ω—ã–µ –∞–ø–ø–∞—Ä–∞—Ç—ã"` ‚Üí `0` (–Ω–µ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è)
- ‚úÖ `"–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã"` ‚Üí `0` (–Ω–µ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è)

### **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å PHP:**
- ‚úÖ `PHP: abs(crc32("1318_—Å–≤–∞—Ä–æ—á–Ω—ã–µ –∞–ø–ø–∞—Ä–∞—Ç—ã")) = 1496952285`
- ‚úÖ `Go: GenerateCategoryIDFromParts("1318", "—Å–≤–∞—Ä–æ—á–Ω—ã–µ –∞–ø–ø–∞—Ä–∞—Ç—ã") = 1496952285`

## üîß **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏**

### **–ê–ª–≥–æ—Ä–∏—Ç–º –ø—Ä–æ–≤–µ—Ä–∫–∏ WB:**
```go
func isWBCategory(categoryName string) bool {
    normalized := strings.TrimSpace(categoryName)
    return strings.HasPrefix(strings.ToLower(normalized), "wb:")
}
```

### **–ü–∞—Ä—Å–∏–Ω–≥ WB –∫–∞—Ç–µ–≥–æ—Ä–∏–∏:**
```go
func parseWBCategory(categoryName string) (subjectId, entity string) {
    // –£–±–∏—Ä–∞–µ–º –ø—Ä–µ—Ñ–∏–∫—Å "wb:" –∏ –Ω–æ—Ä–º–∞–ª–∏–∑—É–µ–º
    normalized := strings.TrimSpace(categoryName)
    if strings.HasPrefix(strings.ToLower(normalized), "wb:") {
        normalized = strings.TrimSpace(normalized[3:]) // –£–±–∏—Ä–∞–µ–º "wb:"
    }
    
    // –ò—â–µ–º —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å " - "
    parts := strings.Split(normalized, " - ")
    if len(parts) != 2 {
        return "", ""
    }
    
    subjectId = strings.TrimSpace(parts[0])
    entity = strings.TrimSpace(parts[1])
    
    return subjectId, entity
}
```

### **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è ID —Ç–æ–ª—å–∫–æ –¥–ª—è WB:**
```go
func GenerateCategoryID(categoryName string) int64 {
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è –∏–º–µ–µ—Ç –ø—Ä–µ—Ñ–∏–∫—Å "wb:"
    if !isWBCategory(categoryName) {
        return 0 // –ù–ï –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º ID –¥–ª—è –ù–ï-WB –∫–∞—Ç–µ–≥–æ—Ä–∏–π
    }
    
    // –ò–∑–≤–ª–µ–∫–∞–µ–º —á–∞—Å—Ç–∏ –∏–∑ —Ñ–æ—Ä–º–∞—Ç–∞ "wb: 1318 - —Å–≤–∞—Ä–æ—á–Ω—ã–µ –∞–ø–ø–∞—Ä–∞—Ç—ã"
    subjectId, entity := parseWBCategory(categoryName)
    if subjectId == "" || entity == "" {
        return 0
    }
    
    // –ò—Å–ø–æ–ª—å–∑—É–µ–º –∞–ª–≥–æ—Ä–∏—Ç–º –∏–∑ PHP: subjectId + "_" + entity
    combined := subjectId + "_" + entity
    hash := crc32.ChecksumIEEE([]byte(combined))
    
    return int64(hash)
}
```

## ‚úÖ **–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É**

### **–í—Å–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω—ã:**
- ‚úÖ **–°–µ–ª–µ–∫—Ç–∏–≤–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è** —Ç–æ–ª—å–∫–æ –¥–ª—è WB –∫–∞—Ç–µ–≥–æ—Ä–∏–π
- ‚úÖ **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–µ—Ñ–∏–∫—Å–∞** "wb:" —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ **–ü–∞—Ä—Å–∏–Ω–≥ —Ñ–æ—Ä–º–∞—Ç–∞** "wb: 1318 - —Å–≤–∞—Ä–æ—á–Ω—ã–µ –∞–ø–ø–∞—Ä–∞—Ç—ã"
- ‚úÖ **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å PHP** –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞
- ‚úÖ **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** –ø—Ä–æ–π–¥–µ–Ω–æ —É—Å–ø–µ—à–Ω–æ
- ‚úÖ **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** –æ–±–Ω–æ–≤–ª–µ–Ω–∞

### **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:**
- ‚úÖ **–°–µ–ª–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å:** –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç ID —Ç–æ–ª—å–∫–æ –¥–ª—è WB –∫–∞—Ç–µ–≥–æ—Ä–∏–π
- ‚úÖ **–°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å:** –û–¥–∏–Ω–∞–∫–æ–≤—ã–µ ID –¥–ª—è –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö WB –∫–∞—Ç–µ–≥–æ—Ä–∏–π
- ‚úÖ **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å:** –ü–æ–ª–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å PHP
- ‚úÖ **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–µ—Ñ–∏–∫—Å–∞ –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è

## üéâ **–ó–∞–∫–ª—é—á–µ–Ω–∏–µ**

**–ó–∞–¥–∞—á–∞ —É—Å–ø–µ—à–Ω–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞!** 

–ê–ª–≥–æ—Ä–∏—Ç–º –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ `category_id` —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç **—Ç–æ–ª—å–∫–æ –¥–ª—è WB –∫–∞—Ç–µ–≥–æ—Ä–∏–π** –≤ —Ñ–æ—Ä–º–∞—Ç–µ `"wb: 1318 - —Å–≤–∞—Ä–æ—á–Ω—ã–µ –∞–ø–ø–∞—Ä–∞—Ç—ã"` —Å –ø–æ–ª–Ω–æ–π –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–µ–π –∏ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å—é —Å PHP –≤–µ—Ä—Å–∏–µ–π.

**–ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- **–°–µ–ª–µ–∫—Ç–∏–≤–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è** - —Ç–æ–ª—å–∫–æ –¥–ª—è WB –∫–∞—Ç–µ–≥–æ—Ä–∏–π
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–∞—Ä—Å–∏–Ω–≥** - –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ subjectId –∏ entity
- **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å PHP** - –∏–¥–µ–Ω—Ç–∏—á–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
- **–í—ã—Å–æ–∫–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** - –±—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è

**API –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é —Å WB –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏!** üöÄ

---

*–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ: $(date)*
*–í–µ—Ä—Å–∏—è: 2.0 (WB –∫–∞—Ç–µ–≥–æ—Ä–∏–∏)*
*–°—Ç–∞—Ç—É—Å: ‚úÖ –ì–û–¢–û–í–û –ö –ü–†–û–î–ê–ö–®–ï–ù–£*

