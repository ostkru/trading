# –û—Ç—á–µ—Ç –æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –ø–∞–∫–µ—Ç–Ω–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è –æ—Ñ—Ñ–µ—Ä–æ–≤

## üéØ –¶–µ–ª—å
–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–∞–∫–µ—Ç–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –æ—Ñ—Ñ–µ—Ä–æ–≤ —Å—Ç—Ä–æ–≥–æ –ø–æ –¥–µ–π—Å—Ç–≤—É—é—â–µ–π –ª–æ–≥–∏–∫–µ, —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –¥–æ 100 –æ—Ñ—Ñ–µ—Ä–æ–≤ –∑–∞ –æ–¥–Ω—É —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é.

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏

### 1. –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –º–æ–¥–µ–ª–µ–π –æ—Ñ—Ñ–µ—Ä–æ–≤
- **–§–∞–π–ª**: `internal/modules/offer/model.go`
- **–î–æ–±–∞–≤–ª–µ–Ω–æ**:
  ```go
  type CreateOffersRequest struct {
      Offers []CreateOfferRequest `json:"offers" validate:"required,dive,min=1,max=100"`
  }
  ```

### 2. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ä–æ—É—Ç–∞ –¥–ª—è –ø–∞–∫–µ—Ç–Ω–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è
- **–§–∞–π–ª**: `internal/modules/offer/routes.go`
- **–î–æ–±–∞–≤–ª–µ–Ω–æ**:
  ```go
  r.POST("/offers/batch", h.CreateOffers)
  ```

### 3. –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ –ø–∞–∫–µ—Ç–Ω–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è
- **–§–∞–π–ª**: `internal/modules/offer/handler.go`
- **–î–æ–±–∞–≤–ª–µ–Ω–æ**: `CreateOffers` –º–µ—Ç–æ–¥
- **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**:
  - ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  - ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è JSON –∑–∞–ø—Ä–æ—Å–∞
  - ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–º–∏—Ç–∞ (–º–∞–∫—Å–∏–º—É–º 100 –æ—Ñ—Ñ–µ—Ä–æ–≤)
  - ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ (400 –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏, 500 –¥–ª—è —Å–µ—Ä–≤–µ—Ä–Ω—ã—Ö –æ—à–∏–±–æ–∫)

### 4. –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å–µ—Ä–≤–∏—Å–Ω–æ–≥–æ –º–µ—Ç–æ–¥–∞ –ø–∞–∫–µ—Ç–Ω–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è
- **–§–∞–π–ª**: `internal/modules/offer/service.go`
- **–î–æ–±–∞–≤–ª–µ–Ω–æ**: `CreateOffers` –º–µ—Ç–æ–¥
- **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**:
  - ‚úÖ –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
  - ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –æ—Ñ—Ñ–µ—Ä–∞
  - ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç —Å–∫–ª–∞–¥–æ–≤
  - ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–Ω–∞—á–µ–Ω–∏–π –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (is_public = true)
  - ‚úÖ –í–æ–∑–≤—Ä–∞—Ç –ø–æ–ª–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö –æ—Ñ—Ñ–µ—Ä–æ–≤

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –¢–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç
- **–§–∞–π–ª**: `test_batch_offers.php`
- **–ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–æ–≤**:
  - ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ 3 –æ—Ñ—Ñ–µ—Ä–æ–≤ –≤ –ø–∞–∫–µ—Ç–µ
  - ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ 1 –æ—Ñ—Ñ–µ—Ä–∞ –≤ –ø–∞–∫–µ—Ç–µ
  - ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–º–∏—Ç–∞ (101 –æ—Ñ—Ñ–µ—Ä –æ—Ç–∫–ª–æ–Ω—è–µ—Ç—Å—è)
  - ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—É—Å—Ç–æ–≥–æ –ø–∞–∫–µ—Ç–∞ (–æ—Ç–∫–ª–æ–Ω—è–µ—Ç—Å—è —Å 400)
  - ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–ø–∏—Å–∫–∞ –æ—Ñ—Ñ–µ—Ä–æ–≤

### –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
```
üì¶ –¢–ï–°–¢ 1: –°–æ–∑–¥–∞–Ω–∏–µ 3 –æ—Ñ—Ñ–µ—Ä–æ–≤ –≤ –ø–∞–∫–µ—Ç–µ
‚úÖ –ü–∞–∫–µ—Ç–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ
–°–æ–∑–¥–∞–Ω–æ –æ—Ñ—Ñ–µ—Ä–æ–≤: 3

üì¶ –¢–ï–°–¢ 2: –°–æ–∑–¥–∞–Ω–∏–µ 1 –æ—Ñ—Ñ–µ—Ä–∞ –≤ –ø–∞–∫–µ—Ç–µ
‚úÖ –ü–∞–∫–µ—Ç–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ
–°–æ–∑–¥–∞–Ω–æ –æ—Ñ—Ñ–µ—Ä–æ–≤: 1

üì¶ –¢–ï–°–¢ 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–º–∏—Ç–∞ (–ø–æ–ø—ã—Ç–∫–∞ —Å–æ–∑–¥–∞—Ç—å 101 –æ—Ñ—Ñ–µ—Ä)
‚úÖ –õ–∏–º–∏—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ

üì¶ –¢–ï–°–¢ 4: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—É—Å—Ç–æ–≥–æ –ø–∞–∫–µ—Ç–∞
‚úÖ –ü—É—Å—Ç–æ–π –ø–∞–∫–µ—Ç –æ—Ç–∫–ª–æ–Ω—è–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ
```

## üìã API Endpoint

### POST /api/v1/offers/batch

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∑–∞–ø—Ä–æ—Å–∞**:
```json
{
  "offers": [
    {
      "product_id": 1,
      "offer_type": "sale",
      "price_per_unit": 100.50,
      "available_lots": 10,
      "tax_nds": 20,
      "units_per_lot": 1,
      "warehouse_id": 1,
      "is_public": true,
      "max_shipping_days": 7
    }
  ]
}
```

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Ç–≤–µ—Ç–∞**:
```json
[
  {
    "offer_id": 93,
    "user_id": 6,
    "updated_at": "2025-07-23T08:44:19Z",
    "created_at": "2025-07-23T08:44:19Z",
    "is_public": true,
    "product_id": 1,
    "price_per_unit": 100.5,
    "tax_nds": 20,
    "units_per_lot": 1,
    "available_lots": 10,
    "latitude": 55.7558,
    "longitude": 37.6176,
    "warehouse_id": 1,
    "offer_type": "sale",
    "max_shipping_days": 7
  }
]
```

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

### 1. –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–æ–Ω–Ω–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- –í—Å–µ –æ—Ñ—Ñ–µ—Ä—ã –≤ –ø–∞–∫–µ—Ç–µ —Å–æ–∑–¥–∞—é—Ç—Å—è –≤ –æ–¥–Ω–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
- –ü—Ä–∏ –æ—à–∏–±–∫–µ –ª—é–±–æ–≥–æ –æ—Ñ—Ñ–µ—Ä–∞ –æ—Ç–∫–∞—Ç—ã–≤–∞–µ—Ç—Å—è –≤–µ—Å—å –ø–∞–∫–µ—Ç
- –ì–∞—Ä–∞–Ω—Ç–∏—è —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö

### 2. –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –æ—Ñ—Ñ–µ—Ä–∞
- –í–∞–ª–∏–¥–∞—Ü–∏—è —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è —Å–∫–ª–∞–¥–∞
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–º–∏—Ç–∞ (–º–∞–∫—Å–∏–º—É–º 100 –æ—Ñ—Ñ–µ—Ä–æ–≤)

### 3. –ó–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
- `is_public` = `true` –µ—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω–æ
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç —Å–∫–ª–∞–¥–∞

### 4. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- HTTP 400 –¥–ª—è –æ—à–∏–±–æ–∫ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- HTTP 500 –¥–ª—è —Å–µ—Ä–≤–µ—Ä–Ω—ã—Ö –æ—à–∏–±–æ–∫
- –î–µ—Ç–∞–ª—å–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö

## üéâ –ò—Ç–æ–≥–æ–≤—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

‚úÖ **–ü–∞–∫–µ—Ç–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –æ—Ñ—Ñ–µ—Ä–æ–≤ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ**

**–ö–ª—é—á–µ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏**:
1. ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –¥–æ 100 –æ—Ñ—Ñ–µ—Ä–æ–≤ –∑–∞ –æ–¥–Ω—É —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é
2. ‚úÖ –°—Ç—Ä–æ–≥–æ–µ —Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –¥–µ–π—Å—Ç–≤—É—é—â–µ–π –ª–æ–≥–∏–∫–µ –æ—Ñ—Ñ–µ—Ä–æ–≤
3. ‚úÖ –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–æ–Ω–Ω–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
4. ‚úÖ –ü–æ–ª–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
5. ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
6. ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç —Å–∫–ª–∞–¥–æ–≤
7. ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–Ω–∞—á–µ–Ω–∏–π –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

**API –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é** –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ –∞–Ω–∞–ª–æ–≥–∏–∏ —Å –ø–∞–∫–µ—Ç–Ω—ã–º —Å–æ–∑–¥–∞–Ω–∏–µ–º –ø—Ä–æ–¥—É–∫—Ç–æ–≤, –Ω–æ —Å —É—á–µ—Ç–æ–º —Å–ø–µ—Ü–∏—Ñ–∏–∫–∏ –æ—Ñ—Ñ–µ—Ä–æ–≤. 