# üìä –û—Ç—á–µ—Ç –æ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ —Å–∏—Å—Ç–µ–º—ã PortalData API

## üéØ **–û–±—â–∏–π —Å—Ç–∞—Ç—É—Å: ‚úÖ –°–ò–°–¢–ï–ú–ê –†–ê–ë–û–¢–ê–ï–¢ –®–¢–ê–¢–ù–û**

**–î–∞—Ç–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏:** 14 –æ–∫—Ç—è–±—Ä—è 2025, 12:30 MSK  
**–í—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã:** 1 —á–∞—Å 45 –º–∏–Ω—É—Ç  
**–°—Ç–∞—Ç—É—Å:** üü¢ **–û–ü–ï–†–ê–¶–ò–û–ù–ù–´–ô**

---

## üöÄ **–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è**

### **1. ‚úÖ –û—Å–Ω–æ–≤–Ω–æ–π API (localhost:8095)**
- **–°—Ç–∞—Ç—É—Å:** –†–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- **–í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞:** ~0.42 –º—Å
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:** MySQL –ø–æ–¥–∫–ª—é—á–µ–Ω–∞
- **–í–µ—Ä—Å–∏—è:** v1

### **2. ‚úÖ OpenSearch –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**
- **–°—Ç–∞—Ç—É—Å:** –ü–æ–ª–Ω–æ—Å—Ç—å—é –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω
- **–î–æ–∫—É–º–µ–Ω—Ç–æ–≤ –≤ –∏–Ω–¥–µ–∫—Å–µ:** 313,560
- **–†–∞–∑–º–µ—Ä –∏–Ω–¥–µ–∫—Å–∞:** 31.4 MB
- **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** –û—Ç–ª–∏—á–Ω–∞—è (0.01-0.05s)

### **3. ‚úÖ Nginx –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ (api.portaldata.ru)**
- **–°—Ç–∞—Ç—É—Å:** –ù–∞—Å—Ç—Ä–æ–µ–Ω–æ –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- **SSL:** –í—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç–∫–ª—é—á–µ–Ω (–¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)
- **CORS:** –ù–∞—Å—Ç—Ä–æ–µ–Ω –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** –í—ã—Å–æ–∫–∞—è

---

## üìã **–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è**

### **–ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–π —Ç–µ—Å—Ç API (44 —Ç–µ—Å—Ç–∞)**
```
‚úÖ –í—Å–µ–≥–æ —Ç–µ—Å—Ç–æ–≤: 44
‚úÖ –ü—Ä–æ–π–¥–µ–Ω–æ: 44 (100%)
‚ùå –ü—Ä–æ–≤–∞–ª–µ–Ω–æ: 0
‚ö° –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è: 78.06 –º—Å
```

**–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–æ–¥—É–ª–∏:**
- ‚úÖ **Products:** 8 —Ç–µ—Å—Ç–æ–≤ (—Å–æ–∑–¥–∞–Ω–∏–µ, –ø–æ–ª—É—á–µ–Ω–∏–µ, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ, —É–¥–∞–ª–µ–Ω–∏–µ)
- ‚úÖ **Warehouses:** 8 —Ç–µ—Å—Ç–æ–≤ (CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏)
- ‚úÖ **Offers:** 9 —Ç–µ—Å—Ç–æ–≤ (–≤–∫–ª—é—á–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é)
- ‚úÖ **Orders:** 1 —Ç–µ—Å—Ç (—Å–æ–∑–¥–∞–Ω–∏–µ –∏ –ø–æ–ª—É—á–µ–Ω–∏–µ)
- ‚úÖ **Security:** –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è, –≤–∞–ª–∏–¥–∞—Ü–∏—è, –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
- ‚úÖ **Error Handling:** 400, 401, 403, 404, 500 –æ—à–∏–±–∫–∏
- ‚úÖ **Filters:** –ü—É–±–ª–∏—á–Ω—ã–µ –æ—Ñ—Ñ–µ—Ä—ã —Å –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–π —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π

### **Rate Limiting —Ç–µ—Å—Ç**
```
‚úÖ –õ–∏–º–∏—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
‚úÖ –¢–∞—Ä–∏—Ñ—ã –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã
‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏
‚úÖ –°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É
```

---

## üîç **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ OpenSearch**

### **–ü–æ–∏—Å–∫ –ø—Ä–æ–¥—É–∫—Ç–æ–≤:**
```bash
# –ë–∞–∑–æ–≤—ã–π –ø–æ–∏—Å–∫
curl "http://api.portaldata.ru/v1/trading/api/search/products?query=—Å–≤–∞—Ä–æ—á–Ω—ã–π&limit=3"
‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç: 407 –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –Ω–∞–π–¥–µ–Ω–æ, 3 –≤–æ–∑–≤—Ä–∞—â–µ–Ω–æ
‚úÖ –í—Ä–µ–º—è: ~0.018s
‚úÖ –ö–∞—á–µ—Å—Ç–≤–æ: Score 17.35 (–≤—ã—Å–æ–∫–æ–µ)

# –ü–æ–∏—Å–∫ –ø–æ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞–º
curl -X POST "http://api.portaldata.ru/v1/trading/api/search/products/characteristics"
‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç: 16 –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –Ω–∞–π–¥–µ–Ω–æ
‚úÖ –í—Ä–µ–º—è: ~0.03s
‚úÖ –ö–∞—á–µ—Å—Ç–≤–æ: Score 26.01 (–æ—Ç–ª–∏—á–Ω–æ–µ)

# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ OpenSearch
curl "http://api.portaldata.ru/v1/trading/api/search/stats"
‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–æ–≤: 313,560
‚úÖ –ò–Ω–¥–µ–∫—Å: products
‚úÖ –°—Ç–∞—Ç—É—Å: –ó–¥–æ—Ä–æ–≤—ã–π
```

### **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø–æ–∏—Å–∫–∞:**
| –¢–µ—Å—Ç | –í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ | –°—Ç–∞—Ç—É—Å |
|------|---------------|--------|
| –ü–æ–∏—Å–∫ "—Å–≤–∞—Ä–æ—á–Ω—ã–π" | 0.018s | ‚úÖ |
| –ü–æ–∏—Å–∫ "—Ç–µ–ª–µ–≤–∏–∑–æ—Ä" | 0.02s | ‚úÖ |
| –ü–æ–∏—Å–∫ "–¥—Ä–µ–ª—å" | 0.015s | ‚úÖ |
| –ü–æ–∏—Å–∫ –ø–æ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞–º | 0.03s | ‚úÖ |
| –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ | 0.05s | ‚úÖ |

**–°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞:** ~0.02s  
**–°—Ç–∞—Ç—É—Å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:** ‚úÖ **–û–¢–õ–ò–ß–ù–û**

---

## üõ†Ô∏è **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏**

### **–ü—Ä–æ—Ü–µ—Å—Å—ã:**
```bash
# Trading API
/tmp/go-build3547726978/b001/exe/main (PID: 1569877)
‚úÖ –°—Ç–∞—Ç—É—Å: –†–∞–±–æ—Ç–∞–µ—Ç
‚úÖ –ü–∞–º—è—Ç—å: 37.5 MB
‚úÖ –í—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã: 1:45
```

### **OpenSearch —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:**
- **–î–æ–∫—É–º–µ–Ω—Ç–æ–≤:** 313,560
- **–†–∞–∑–º–µ—Ä:** 31.4 MB
- **–°–µ–≥–º–µ–Ω—Ç–æ–≤:** 11
- **–ö—ç—à –∑–∞–ø—Ä–æ—Å–æ–≤:** 6/6 (100% hit rate)
- **–ü–æ–∏—Å–∫–æ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤:** 183

### **Nginx –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:**
- **–§–∞–π–ª:** `/etc/nginx/sites-available/api.portaldata.ru`
- **–°—Ç–∞—Ç—É—Å:** –ê–∫—Ç–∏–≤–µ–Ω
- **–ü—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ:** `localhost:8095` ‚Üí `api.portaldata.ru`
- **CORS:** –ù–∞—Å—Ç—Ä–æ–µ–Ω
- **–¢–∞–π–º–∞—É—Ç—ã:** 30s

---

## üö® **–ù–∞–π–¥–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã**

### **1. ‚ùå –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ —Ü–µ–Ω–µ**
**–ü—Ä–æ–±–ª–µ–º–∞:** –ü–æ–ª–µ `price` –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ –∏–Ω–¥–µ–∫—Å–µ OpenSearch  
**–û—à–∏–±–∫–∞:** `No mapping found for [price] in order to sort on`  
**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–µ `price` –≤ –º–∞–ø–ø–∏–Ω–≥ –∏–Ω–¥–µ–∫—Å–∞

### **2. ‚ö†Ô∏è –ü—É—Å—Ç—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ category_id**
**–ü—Ä–æ–±–ª–µ–º–∞:** –ü–æ–∏—Å–∫ –ø–æ `category_id=1318` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 0 —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤  
**–í–æ–∑–º–æ–∂–Ω–∞—è –ø—Ä–∏—á–∏–Ω–∞:** –ù–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ñ–æ—Ä–º–∞—Ç–∞ category_id –≤ –∏–Ω–¥–µ–∫—Å–µ

---

## üìà **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏**

### **1. –ò—Å–ø—Ä–∞–≤–∏—Ç—å —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫—É**
```json
// –î–æ–±–∞–≤–∏—Ç—å –≤ –º–∞–ø–ø–∏–Ω–≥ OpenSearch
{
  "properties": {
    "price": {
      "type": "float"
    }
  }
}
```

### **2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –º–∞–ø–ø–∏–Ω–≥ category_id**
- –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ category_id –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∏–Ω–¥–µ–∫—Å–∏—Ä—É–µ—Ç—Å—è
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö –≤ –∏–Ω–¥–µ–∫—Å–µ

### **3. –î–æ–±–∞–≤–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç–≤–µ—Ç–∞
- –ê–ª–µ—Ä—Ç—ã –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
- –ú–µ—Ç—Ä–∏–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞ –ø–æ–∏—Å–∫–∞

---

## üéØ **–ì–æ—Ç–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è**

### **–ü–æ–∏—Å–∫ –ø—Ä–æ–¥—É–∫—Ç–æ–≤:**
```bash
# –ë–∞–∑–æ–≤—ã–π –ø–æ–∏—Å–∫
curl "http://api.portaldata.ru/v1/trading/api/search/products?query=—Å–≤–∞—Ä–æ—á–Ω—ã–π&limit=5"

# –ü–æ–∏—Å–∫ –ø–æ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞–º
curl -X POST "http://api.portaldata.ru/v1/trading/api/search/products/characteristics" \
  -H "Content-Type: application/json" \
  -d '{"query": "–∏–Ω–≤–µ—Ä—Ç–æ—Ä", "characteristics": {"–¢–∏–ø —Å–≤–∞—Ä–æ—á–Ω–æ–≥–æ –∞–ø–ø–∞—Ä–∞—Ç–∞": "–∏–Ω–≤–µ—Ä—Ç–æ—Ä–Ω—ã–π"}}'

# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
curl "http://api.portaldata.ru/v1/trading/api/search/stats"

# –ü–∞–≥–∏–Ω–∞—Ü–∏—è
curl "http://api.portaldata.ru/v1/trading/api/search/products?query=–¥—Ä–µ–ª—å&page=2&limit=10"
```

### **–ü—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø –∫ API:**
```bash
# –°—Ç–∞—Ç—É—Å API
curl "http://localhost:8095/"

# –ü–æ–∏—Å–∫ —á–µ—Ä–µ–∑ localhost
curl "http://localhost:8095/api/search/products?query=—Ç–µ—Å—Ç&limit=1"
```

---

## üéâ **–ó–∞–∫–ª—é—á–µ–Ω–∏–µ**

### **‚úÖ –°–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é:**

1. **API —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ** - 100% —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ–π–¥–µ–Ω–æ
2. **OpenSearch –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω** - 313K –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤, –±—ã—Å—Ç—Ä—ã–π –ø–æ–∏—Å–∫
3. **Nginx –Ω–∞—Å—Ç—Ä–æ–µ–Ω** - –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
4. **Rate limiting —Ä–∞–±–æ—Ç–∞–µ—Ç** - –ª–∏–º–∏—Ç—ã –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
5. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –æ—Ç–ª–∏—á–Ω–∞—è** - —Å—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ 0.02s

### **üöÄ –ì–æ—Ç–æ–≤–æ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É!**

**–°–∏—Å—Ç–µ–º–∞ PortalData API –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞ –∏ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!** üéØ
