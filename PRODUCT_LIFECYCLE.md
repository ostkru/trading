# –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª –ø—Ä–æ–¥—É–∫—Ç–∞

## –û–±–∑–æ—Ä

–î–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—ã–≤–∞–µ—Ç –ø–æ–ª–Ω—ã–π –∂–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª –ø—Ä–æ–¥—É–∫—Ç–∞ –≤ —Å–∏—Å—Ç–µ–º–µ –æ—Ç —Å–æ–∑–¥–∞–Ω–∏—è –¥–æ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏.

## üîÑ –≠—Ç–∞–ø—ã –∂–∏–∑–Ω–µ–Ω–Ω–æ–≥–æ —Ü–∏–∫–ª–∞

### 1. –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞

**–¢—Ä–∏–≥–≥–µ—Ä:** POST `/api/v1/products`

**–î–µ–π—Å—Ç–≤–∏—è:**
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–ø–∏—Å–∏ –≤ –ë–î —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º `processing`
- –ó–∞–ø—É—Å–∫ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏
- –í–æ–∑–≤—Ä–∞—Ç —Å–æ–∑–¥–∞–Ω–Ω–æ–≥–æ –ø—Ä–æ–¥—É–∫—Ç–∞

**SQL:**
```sql
INSERT INTO products (name, vendor_article, recommend_price, brand, category, brand_id, category_id, description, barcode, user_id, status) 
VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, 'processing')
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –°—Ç–∞—Ç—É—Å: `processing`
- `category_id`: `NULL`
- `brand_id`: `NULL`

### 2. –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è

**–¢—Ä–∏–≥–≥–µ—Ä:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ–¥—É–∫—Ç–∞

**–ü—Ä–æ—Ü–µ—Å—Å:**
1. –í–æ—Ä–∫–µ—Ä –ø–æ–ª—É—á–∞–µ—Ç –∑–∞–¥–∞—á—É –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏
2. –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –Ω–∞–∑–≤–∞–Ω–∏–µ, –±—Ä–µ–Ω–¥ –∏ –∫–∞—Ç–µ–≥–æ—Ä–∏—é –ø—Ä–æ–¥—É–∫—Ç–∞
3. –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç `category_id` –∏ `brand_id` —Å –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å—é
4. –û–±–Ω–æ–≤–ª—è–µ—Ç —Å—Ç–∞—Ç—É—Å –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –¥–ª—è —É—Å–ø–µ—à–Ω–æ–π –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏:**
- `confidence.category >= 0.99` ‚Üí –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è `category_id`
- `confidence.brand >= 0.99` ‚Üí –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è `brand_id`
- **–ú–∏–Ω–∏–º—É–º –æ–¥–∏–Ω ID** –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–∞–π–¥–µ–Ω —Å –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å—é ‚â• 0.99

### 3. –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏

#### ‚úÖ –£—Å–ø–µ—à–Ω–∞—è –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è

**–£—Å–ª–æ–≤–∏–µ:** –ù–∞–π–¥–µ–Ω —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω ID —Å –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å—é ‚â• 0.99

**–î–µ–π—Å—Ç–≤–∏—è:**
- –°—Ç–∞—Ç—É—Å: `processing` ‚Üí `classified`
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ `category_id` –∏/–∏–ª–∏ `brand_id`
- –ò–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è –∫—ç—à–∞

**SQL:**
```sql
UPDATE products 
SET status = 'classified', category_id = ?, brand_id = ?, updated_at = NOW() 
WHERE id = ?
```

#### ‚ùå –ù–µ—É–¥–∞—á–Ω–∞—è –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è

**–£—Å–ª–æ–≤–∏–µ:** –ù–µ –Ω–∞–π–¥–µ–Ω—ã ID —Å –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ–π –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å—é

**–î–µ–π—Å—Ç–≤–∏—è:**
- –°—Ç–∞—Ç—É—Å: `processing` ‚Üí `not_classified`
- `category_id` –∏ `brand_id` –æ—Å—Ç–∞—é—Ç—Å—è `NULL`

**SQL:**
```sql
UPDATE products 
SET status = 'not_classified', updated_at = NOW() 
WHERE id = ?
```

## üìä –°—Ç–∞—Ç—É—Å—ã –ø—Ä–æ–¥—É–∫—Ç–æ–≤

| –°—Ç–∞—Ç—É—Å | –û–ø–∏—Å–∞–Ω–∏–µ | `category_id` | `brand_id` | –ú–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –æ—Ñ—Ñ–µ—Ä |
|--------|----------|---------------|------------|-------------------|
| `processing` | –í –ø—Ä–æ—Ü–µ—Å—Å–µ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ | `NULL` | `NULL` | ‚ùå –ù–µ—Ç |
| `classified` | –£—Å–ø–µ—à–Ω–æ –∫–ª–∞—Å—Å–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω | –ó–∞–ø–æ–ª–Ω–µ–Ω | –ó–∞–ø–æ–ª–Ω–µ–Ω | ‚úÖ –î–∞ |
| `not_classified` | –ù–µ —É–¥–∞–ª–æ—Å—å –∫–ª–∞—Å—Å–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å | `NULL` | `NULL` | ‚ùå –ù–µ—Ç |

## üîç –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –ø—Ä–æ–¥—É–∫—Ç–∞
```bash
curl "http://localhost:8095/api/v1/products/123?api_key=YOUR_API_KEY" | jq '.status'
```

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Å—Ç–∞—Ç—É—Å–∞–º
```sql
SELECT status, COUNT(*) as count FROM products GROUP BY status;
```

### –ü—Ä–æ–¥—É–∫—Ç—ã –≤ –æ–±—Ä–∞–±–æ—Ç–∫–µ
```sql
SELECT id, name, created_at FROM products WHERE status = 'processing' ORDER BY created_at DESC;
```

### –£—Å–ø–µ—à–Ω–æ –∫–ª–∞—Å—Å–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ
```sql
SELECT id, name, category_id, brand_id FROM products WHERE status = 'classified';
```

### –ù–µ–∫–ª–∞—Å—Å–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ
```sql
SELECT id, name FROM products WHERE status = 'not_classified';
```

## üö® –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

### –û—à–∏–±–∫–∏ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏
- –õ–æ–≥–∏—Ä—É—é—Ç—Å—è –≤ `app.log`
- –ü—Ä–æ–¥—É–∫—Ç –æ—Å—Ç–∞–µ—Ç—Å—è —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º `processing` –ø—Ä–∏ –æ—à–∏–±–∫–µ –≤–æ—Ä–∫–µ—Ä–∞
- –ú–æ–∂–Ω–æ –ø–æ–≤—Ç–æ—Ä–∏—Ç—å –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—é –≤—Ä—É—á–Ω—É—é

### –û—à–∏–±–∫–∏ —Å–æ–∑–¥–∞–Ω–∏—è –æ—Ñ—Ñ–µ—Ä–∞
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è `category_id` –∏ `brand_id`
- –û—à–∏–±–∫–∞: "–ù–µ–ª—å–∑—è —Å–æ–∑–¥–∞—Ç—å –æ—Ñ—Ñ–µ—Ä –¥–ª—è –ø—Ä–æ–¥—É–∫—Ç–∞ –±–µ–∑ category_id –∏–ª–∏ brand_id"

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≥–æ—Ä—É—Ç–∏–Ω–∞ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏
- –í–æ—Ä–∫–µ—Ä –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∑–∞–¥–∞—á–∏ –∏–∑ –æ—á–µ—Ä–µ–¥–∏
- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –ë–î

### –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
- –ü—Ä–æ–¥—É–∫—Ç—ã –∫—ç—à–∏—Ä—É—é—Ç—Å—è –Ω–∞ 1 —á–∞—Å
- –ö—ç—à –∏–Ω–≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏
- –ö–ª—é—á –∫—ç—à–∞: `product:{id}`

### –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
- –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞ –≤ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –≤ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
- –û—Ç–∫–∞—Ç –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö

## üìà –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
- Prepared statements –¥–ª—è —á–∞—Å—Ç—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- Bulk INSERT –¥–ª—è –º–∞—Å—Å–æ–≤–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏
- –°—á–µ—Ç—á–∏–∫–∏ —É—Å–ø–µ—à–Ω—ã—Ö/–Ω–µ—É–¥–∞—á–Ω—ã—Ö –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–π
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º

## üõ°Ô∏è –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è API
- –°—Ç–∞—Ç—É—Å –Ω–µ–ª—å–∑—è –∏–∑–º–µ–Ω–∏—Ç—å —á–µ—Ä–µ–∑ API
- –¢–æ–ª—å–∫–æ –≤–æ—Ä–∫–µ—Ä –º–æ–∂–µ—Ç –æ–±–Ω–æ–≤–ª—è—Ç—å `category_id` –∏ `brand_id`
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

### –ê—É–¥–∏—Ç
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –í—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–∫–∏
